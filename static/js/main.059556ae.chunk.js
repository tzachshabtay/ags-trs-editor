(this["webpackJsonpags-trs-editor"]=this["webpackJsonpags-trs-editor"]||[]).push([[0],{58:function(e,t,n){e.exports=n(70)},63:function(e,t,n){},64:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),l=(n(63),n(15)),s=n(10),c=n(20),u=n(21),d=n(24),f=(n(64),n(17)),p=n(104),h=n(113),m=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onLineChanged=function(e){n.setState({to:e.target.value})},n.onFocus=function(e){n.props.focused.input=Object(f.a)(n)},n.state={to:e.to},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"IsFocused",value:function(){return this.props.focused.input===this}},{key:"Focus",value:function(){this.input&&this.input.focus()}},{key:"render",value:function(){var e=this,t=this.props.from.trimStart(),n="";t.startsWith("&")&&(n=t.substring(1,t.indexOf(" ")),t=t.substring(t.indexOf(" ")+1));var a=this.state.to?this.state.to.trimStart():"";return a.startsWith("&")&&(a=a.substring(a.indexOf(" ")+1)),r.a.createElement(p.a,{container:!0,alignItems:"center",direction:"row",spacing:0,style:{marginTop:5}},r.a.createElement(p.a,{item:!0,xs:1},r.a.createElement("span",null,n)),r.a.createElement(p.a,{item:!0,xs:11},r.a.createElement(h.a,{label:t,placeholder:"Missing translation",multiline:!0,margin:"normal",fullWidth:!0,value:a,onChange:this.onLineChanged,onFocus:this.onFocus,inputRef:function(t){t&&(e.input=t)}})))}}]),t}(r.a.Component),g=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e={input:null},t=this.props.lines.map((function(t){return r.a.createElement(m,{key:t.from,from:t.from,to:t.to,focused:e,ref:function(e){e&&(t.ref=e)}})}));return r.a.createElement("div",{style:{paddingLeft:10}},t)}}]),t}(r.a.Component),v=n(50),b=n(110),y=n(114),E=n(111),k=n(112),O=n(116),C=n(48),j=n.n(C),x=n(45),w=n.n(x),F=n(46),S=n.n(F),P=n(47),T=n.n(P),A=n(44),M=n.n(A),N=n(43),R=n.n(N),L=n(49),W=n.n(L),B=n(109),I=n(4),U=Object(I.a)({colorPrimary:{backgroundColor:"darkblue"},barColorPrimary:{backgroundColor:"lightblue"}})(B.a),G=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).trackProgress=function(){if(n.props.lines){var e=0,t=!0,a=!1,r=void 0;try{for(var i,o=n.props.lines[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.ref.state.to&&(e+=1)}}catch(l){a=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}n.setState({full:e})}setTimeout(n.trackProgress,500)},n.getFocused=function(){var e=!0,t=!1,a=void 0;try{for(var r,i=n.props.lines.entries()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,l=Object(v.a)(o,2),s=l[0];if(l[1].ref.IsFocused())return s}}catch(c){t=!0,a=c}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}return-1},n.onNextClicked=function(){var e=n.getFocused();n.props.lines[(e+1)%n.props.lines.length].ref.Focus()},n.onPreviousClicked=function(){var e=n.getFocused();e<1&&(e=n.props.lines.length),n.props.lines[(e-1)%n.props.lines.length].ref.Focus()},n.onNextMissingClicked=function(){var e=n.getFocused();e<0&&(e=0);for(var t=e;;){t=(t+1)%n.props.lines.length;var a=n.props.lines[t];if(!a.ref.state.to||t===e){a.ref.Focus();break}}},n.onPreviousMissingClicked=function(){var e=n.getFocused();e<0&&(e=n.props.lines.length-1);for(var t=e;;){(t=(t-1)%n.props.lines.length)<0&&(t=n.props.lines.length-1);var a=n.props.lines[t];if(!a.ref.state.to||t===e){a.ref.Focus();break}}},n.genFile=function(){var e="",t=!0,a=!1,r=void 0;try{for(var i,o=n.props.lines[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value;e+="".concat(l.from,"\r\n").concat(l.ref.state.to||"","\r\n")}}catch(s){a=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}n.download(e)},n.download=function(e){var t=document.createElement("a"),n=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="ags.trs",document.body.appendChild(t),t.click()},n.upload=function(){n.props.upload()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){setTimeout(this.trackProgress,500)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(k.a,{variant:"h6",style:{paddingRight:50}},"AGS TRS Editor"),r.a.createElement(O.a,{title:"Load","aria-label":"load"},r.a.createElement(y.a,{edge:"start",color:"inherit",onClick:this.upload},r.a.createElement(R.a,null))),this.props.lines&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{title:"Save","aria-label":"save"},r.a.createElement(y.a,{edge:"start",color:"inherit",onClick:this.genFile,style:{marginRight:50}},r.a.createElement(M.a,null))),r.a.createElement(O.a,{title:"Previous missing line","aria-label":"previous missing line"},r.a.createElement(y.a,{edge:"start",color:"inherit",onClick:this.onPreviousMissingClicked},r.a.createElement(w.a,null))),r.a.createElement(O.a,{title:"Previous line (SHIFT + TAB)","aria-label":"previous line"},r.a.createElement(y.a,{edge:"start",color:"inherit",onClick:this.onPreviousClicked},r.a.createElement(S.a,null))),r.a.createElement(O.a,{title:"Next line (TAB)","aria-label":"next line"},r.a.createElement(y.a,{edge:"start",color:"inherit",onClick:this.onNextClicked},r.a.createElement(T.a,null))),r.a.createElement(O.a,{title:"Next missing line","aria-label":"next missing line"},r.a.createElement(y.a,{edge:"start",color:"inherit",onClick:this.onNextMissingClicked},r.a.createElement(j.a,null)))),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(O.a,{title:"Source Code","aria-label":"source code"},r.a.createElement(y.a,{color:"inherit",target:"_blank",href:"https://github.com/tzachshabtay/ags-trs-editor/"},r.a.createElement(W.a,null))))),this.renderProgress())}},{key:"renderProgress",value:function(){if(!this.props.lines)return null;var e=this.state&&this.state.full||0,t=Math.round(e/this.props.lines.length*100),n="".concat(e,"/").concat(this.props.lines.length," Completed (").concat(t,"%)");return r.a.createElement(O.a,{title:n,"aria-label":"progress"},r.a.createElement(U,{variant:"determinate",value:t}))}}]),t}(r.a.Component),J=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).upload=function(){var e=document.createElement("input");e.type="file",e.style.display="none",e.onchange=function(t){var n=t.target.files[0];if(n){var a=new FileReader;a.onload=function(t){var n=t.target.result;e.func(n),document.body.removeChild(e)},a.readAsText(n)}},e.func=n.onUploaded,document.body.appendChild(e),e.click()},n.onUploaded=function(e){var t=e.replace(/\r/g,"").split("\n"),a=[],r="",i="",o="",l=!0,s=!1,c=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;if(f.startsWith("&"))if(i)a.push({from:r,to:i}),r=f,o=f.substring(1,f.indexOf(" ")),i="";else if(r){var p=f.substring(1,f.indexOf(" "));p!==o?(o=p,a.push({from:r,to:i}),r=f,i=""):i=f}else r=f,o=f.substring(1,f.indexOf(" "));else i?i="".concat(i,"\n").concat(f):r="".concat(r,"\n").concat(f)}}catch(h){s=!0,c=h}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}r&&a.push({from:r,to:i}),n.setState({lines:a})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(G,{lines:this.state&&this.state.lines,upload:this.upload}),this.state&&r.a.createElement(g,{lines:this.state.lines}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[58,1,2]]]);
//# sourceMappingURL=main.059556ae.chunk.js.map