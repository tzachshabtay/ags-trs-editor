(this["webpackJsonpags-trs-editor"]=this["webpackJsonpags-trs-editor"]||[]).push([[0],{129:function(e,t,n){e.exports=n(211)},134:function(e,t,n){},135:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),l=(n(134),n(19)),s=n(12),c=n(29),u=n(30),d=n(33),p=(n(135),n(21)),h=n(253),f=r.a.createContext({}),m=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onLineChanged=function(e){n.context.lines[n.props.index]=e.target.value,n.setState({to:e.target.value})},n.onFocus=function(e){n.props.focused.input=Object(p.a)(n)},n.state={to:e.to},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.context.lines[this.props.index]=this.state.to}},{key:"IsFocused",value:function(){return this.props.focused.input===this}},{key:"Focus",value:function(){this.input&&this.input.focus()}},{key:"render",value:function(){var e=this,t=this.props.from.trimStart(),n=this.state.to?this.state.to.trimStart():"";return r.a.createElement(h.a,{label:t,placeholder:"Missing translation",multiline:!0,margin:"normal",fullWidth:!0,value:n,onChange:this.onLineChanged,onFocus:this.onFocus,inputRef:function(t){t&&(e.input=t)}})}}]),t}(r.a.Component);m.contextType=f;var g=n(110),v=n.n(g),y=n(111),b=n.n(y),E=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).focused={input:null},n.rowRenderer=function(e){var t=e.key,a=e.index,i=(e.isScrolling,e.isVisible,e.style),o=n.props.lines[a];return r.a.createElement("div",{key:t,style:i},r.a.createElement(m,{from:o.from,to:o.to,index:a,focused:n.focused,ref:function(e){e&&(o.ref=e)}}))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.context.lines=new Array(this.props.lines.length)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingLeft:10,paddingTop:60,paddingBottom:10,height:"100%",flexGrow:1}},r.a.createElement(b.a,null,(function(t){var n=t.height,a=t.width;return r.a.createElement(v.a,{width:a,height:n,rowCount:e.props.lines.length,rowHeight:50,rowRenderer:e.rowRenderer,ref:function(t){t&&(e.context.list=t)},style:{paddingBottom:10}})})))}}]),t}(r.a.Component);E.contextType=f;var k=n(120),x=n(249),w=n(254),C=n(250),j=n(251),O=n(256),F=n(118),T=n.n(F),S=n(115),P=n.n(S),M=n(116),R=n.n(M),A=n(117),B=n.n(A),L=n(114),N=n.n(L),U=n(113),I=n.n(U),W=n(119),D=n.n(W),G=n(248),H=n(252),J=n(4),z=Object(J.a)({colorPrimary:{backgroundColor:"darkblue"},barColorPrimary:{backgroundColor:"lightblue"}})(G.a),V=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getTo=function(e){var t=n.context.lines[e.index];return void 0===t?e.to:t},n.isMissing=function(e){return!n.getTo(e)},n.trackProgress=function(){if(n.props.lines&&n.context.lines){var e=0,t=!0,a=!1,r=void 0;try{for(var i,o=n.props.lines[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value;n.isMissing(l)||(e+=1)}}catch(s){a=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}n.setState({full:e})}setTimeout(n.trackProgress,500)},n.getFocused=function(){var e=!0,t=!1,a=void 0;try{for(var r,i=n.props.lines.entries()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,l=Object(k.a)(o,2),s=l[0],c=l[1];if(c.ref&&c.ref.IsFocused())return s}}catch(u){t=!0,a=u}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}return-1},n.onNextClicked=function(){var e=n.getFocused();n.props.lines[(e+1)%n.props.lines.length].ref.Focus()},n.onPreviousClicked=function(){var e=n.getFocused();e<1&&(e=n.props.lines.length),n.props.lines[(e-1)%n.props.lines.length].ref.Focus()},n.onNextMissingClicked=function(){var e=n.getFocused();e<0&&(e=0);for(var t=e,a=function(){t=(t+1)%n.props.lines.length;var a=n.props.lines[t];if(n.isMissing(a)||t===e)return t>=n.props.lines.length-1&&(t=n.props.lines.length-2),n.context.list.scrollToRow(t+1),setTimeout((function(){a.ref&&a.ref.Focus()}),100),"break"};;){if("break"===a())break}},n.onPreviousMissingClicked=function(){var e=n.getFocused();e<0&&(e=n.props.lines.length-1);for(var t=e,a=function(){(t=(t-1)%n.props.lines.length)<0&&(t=n.props.lines.length-1);var a=n.props.lines[t];if(n.isMissing(a)||t===e)return t<=0&&(t=1),n.context.list.scrollToRow(t-1),setTimeout((function(){a.ref&&a.ref.Focus()}),100),"break"};;){if("break"===a())break}},n.genFile=function(){var e="".concat(n.props.comments,"\r\n"),t=!0,a=!1,r=void 0;try{for(var i,o=n.props.lines[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value;e+="".concat(l.from,"\r\n").concat(n.getTo(l)||"","\r\n")}}catch(s){a=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}n.download(e)},n.download=function(e){var t=document.createElement("a"),n=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="ags.trs",document.body.appendChild(t),t.click()},n.upload=function(){n.props.upload()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){setTimeout(this.trackProgress,500)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{position:"fixed"},r.a.createElement(C.a,null,r.a.createElement(j.a,{variant:"h6",style:{paddingRight:50}},"AGS TRS Editor"),r.a.createElement(O.a,{title:"Load","aria-label":"load"},r.a.createElement(w.a,{edge:"start",color:"inherit",onClick:this.upload},r.a.createElement(I.a,null))),this.props.lines&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{title:"Save","aria-label":"save"},r.a.createElement(w.a,{edge:"start",color:"inherit",onClick:this.genFile,style:{marginRight:50}},r.a.createElement(N.a,null))),r.a.createElement(O.a,{title:"Previous missing line","aria-label":"previous missing line"},r.a.createElement(w.a,{edge:"start",color:"inherit",onClick:this.onPreviousMissingClicked},r.a.createElement(P.a,null))),r.a.createElement(O.a,{title:"Previous line (SHIFT + TAB)","aria-label":"previous line"},r.a.createElement(w.a,{edge:"start",color:"inherit",onClick:this.onPreviousClicked},r.a.createElement(R.a,null))),r.a.createElement(O.a,{title:"Next line (TAB)","aria-label":"next line"},r.a.createElement(w.a,{edge:"start",color:"inherit",onClick:this.onNextClicked},r.a.createElement(B.a,null))),r.a.createElement(O.a,{title:"Next missing line","aria-label":"next missing line"},r.a.createElement(w.a,{edge:"start",color:"inherit",onClick:this.onNextMissingClicked},r.a.createElement(T.a,null)))),this.props.loading&&r.a.createElement(H.a,null),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(O.a,{title:"Source Code","aria-label":"source code"},r.a.createElement(w.a,{color:"inherit",target:"_blank",href:"https://github.com/tzachshabtay/ags-trs-editor/"},r.a.createElement(D.a,null)))),this.renderProgress()))}},{key:"renderProgress",value:function(){if(!this.props.lines)return null;var e=this.state&&this.state.full||0,t=Math.round(e/this.props.lines.length*100),n="".concat(e,"/").concat(this.props.lines.length," Completed (").concat(t,"%)");return r.a.createElement(O.a,{title:n,"aria-label":"progress"},r.a.createElement(z,{variant:"determinate",value:t}))}}]),t}(r.a.Component);V.contextType=f;var $=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).startUpload=function(){n.setState({loading:!0},n.upload)},n.upload=function(){var e=document.createElement("input");e.type="file",e.style.display="none",e.onchange=function(t){var n=t.target.files[0];if(n){var a=new FileReader;a.onload=function(t){var n=t.target.result;e.func(n),document.body.removeChild(e)},a.readAsText(n)}},e.func=n.onUploaded,document.body.appendChild(e),e.click()},n.onUploaded=function(e){var t=e.replace(/\r/g,"").split("\n"),a=[],r=null,i=null,o="",l=0,s=!0,c=!1,u=void 0;try{for(var d,p=t[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var h=d.value;h.startsWith("//")?o="".concat(o,"\r\n").concat(h):null===r?r=h:null===i?i=h:(a.push({from:r,to:i,index:l}),l+=1,r=h,i=null)}}catch(f){c=!0,u=f}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}r&&(a.push({from:r,to:i,index:l}),l+=1),n.setState({lines:a,comments:o})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(f.Provider,{value:{}},r.a.createElement("div",{className:"App",style:{height:"100%"}},r.a.createElement(V,{lines:this.state&&this.state.lines,comments:this.state&&this.state.comments,upload:this.startUpload,loading:this.state&&this.state.loading}),this.state&&this.state.lines&&r.a.createElement(E,{lines:this.state.lines,comments:this.state.comments}),(!this.state||!this.state.lines)&&r.a.createElement(j.a,{style:{paddingTop:100,paddingLeft:50}},"Please load a TRS file.")))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[129,1,2]]]);
//# sourceMappingURL=main.64ab8992.chunk.js.map