(this["webpackJsonpags-trs-editor"]=this["webpackJsonpags-trs-editor"]||[]).push([[0],{134:function(e,t,n){e.exports=n(187)},139:function(e,t,n){},140:function(e,t,n){},186:function(e){e.exports=JSON.parse('[{"encodings":[{"labels":["unicode-1-1-utf-8","unicode11utf8","unicode20utf8","utf-8","utf8","x-unicode20utf8"],"name":"UTF-8"}],"heading":"The Encoding"},{"encodings":[{"labels":["866","cp866","csibm866","ibm866"],"name":"IBM866"},{"labels":["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],"name":"ISO-8859-2"},{"labels":["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],"name":"ISO-8859-3"},{"labels":["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],"name":"ISO-8859-4"},{"labels":["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],"name":"ISO-8859-5"},{"labels":["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],"name":"ISO-8859-6"},{"labels":["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],"name":"ISO-8859-7"},{"labels":["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],"name":"ISO-8859-8"},{"labels":["csiso88598i","iso-8859-8-i","logical"],"name":"ISO-8859-8-I"},{"labels":["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],"name":"ISO-8859-10"},{"labels":["iso-8859-13","iso8859-13","iso885913"],"name":"ISO-8859-13"},{"labels":["iso-8859-14","iso8859-14","iso885914"],"name":"ISO-8859-14"},{"labels":["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],"name":"ISO-8859-15"},{"labels":["iso-8859-16"],"name":"ISO-8859-16"},{"labels":["cskoi8r","koi","koi8","koi8-r","koi8_r"],"name":"KOI8-R"},{"labels":["koi8-ru","koi8-u"],"name":"KOI8-U"},{"labels":["csmacintosh","mac","macintosh","x-mac-roman"],"name":"macintosh"},{"labels":["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],"name":"windows-874"},{"labels":["cp1250","windows-1250","x-cp1250"],"name":"windows-1250"},{"labels":["cp1251","windows-1251","x-cp1251"],"name":"windows-1251"},{"labels":["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],"name":"windows-1252"},{"labels":["cp1253","windows-1253","x-cp1253"],"name":"windows-1253"},{"labels":["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],"name":"windows-1254"},{"labels":["cp1255","windows-1255","x-cp1255"],"name":"windows-1255"},{"labels":["cp1256","windows-1256","x-cp1256"],"name":"windows-1256"},{"labels":["cp1257","windows-1257","x-cp1257"],"name":"windows-1257"},{"labels":["cp1258","windows-1258","x-cp1258"],"name":"windows-1258"},{"labels":["x-mac-cyrillic","x-mac-ukrainian"],"name":"x-mac-cyrillic"}],"heading":"Legacy single-byte encodings"},{"encodings":[{"labels":["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],"name":"GBK"},{"labels":["gb18030"],"name":"gb18030"}],"heading":"Legacy multi-byte Chinese (simplified) encodings"},{"encodings":[{"labels":["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],"name":"Big5"}],"heading":"Legacy multi-byte Chinese (traditional) encodings"},{"encodings":[{"labels":["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],"name":"EUC-JP"},{"labels":["csiso2022jp","iso-2022-jp"],"name":"ISO-2022-JP"},{"labels":["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],"name":"Shift_JIS"}],"heading":"Legacy multi-byte Japanese encodings"},{"encodings":[{"labels":["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],"name":"EUC-KR"}],"heading":"Legacy multi-byte Korean encodings"},{"encodings":[{"labels":["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr","replacement"],"name":"replacement"},{"labels":["unicodefffe","utf-16be"],"name":"UTF-16BE"},{"labels":["csunicode","iso-10646-ucs-2","ucs-2","unicode","unicodefeff","utf-16","utf-16le"],"name":"UTF-16LE"},{"labels":["x-user-defined"],"name":"x-user-defined"}],"heading":"Legacy miscellaneous encodings"}]')},187:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(12),s=n.n(o),l=(n(139),n(28)),r=n(24),c=n(25),u=n(27),d=n(26),h=(n(140),n(121)),m=n(239),p=n(228),f=a.a.createContext({}),g=function(e){return e.replace(/^\s+/,"")},b=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).focus=function(){i.input&&i.input.focus()},i.onLineChanged=function(e){i.context.lines[i.props.index]=e.target.value,i.setState({to:e.target.value})},i.onFocus=function(e){i.context.focused=i.props.index},i.state={to:e.to},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.context.lines[this.props.index]=this.state.to,this.context.focus[this.props.index]=this.focus}},{key:"componentWillUnmount",value:function(){this.context.focus[this.props.index]=null}},{key:"render",value:function(){var e=this,t=g(this.props.from),n=t,i="";t&&t.length>200&&(n="",i=t);var o=this.state.to?g(this.state.to):"";return a.a.createElement(p.a,{container:!0,alignItems:"center",direction:"row",spacing:0,style:{marginTop:5}},a.a.createElement(p.a,{item:!0,xs:1},a.a.createElement("span",null,this.props.index+1)),a.a.createElement(p.a,{item:!0,xs:11},a.a.createElement(m.a,{label:n,helperText:i,placeholder:"Missing translation",margin:"normal",fullWidth:!0,value:o,onChange:this.onLineChanged,onFocus:this.onFocus,inputRef:function(t){t&&(e.input=t)},inputProps:{spellCheck:!0}})))}}]),n}(a.a.Component);b.contextType=f;var v=n(108),x=n.n(v),k=n(109),w=n.n(k),E=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).onSearch=function(e){if(e){var t={},n={},a=0;e=e.toLowerCase();var o,s=Object(l.a)(i.props.lines.entries());try{for(s.s();!(o=s.n()).done;){var r=Object(h.a)(o.value,2),c=r[0],u=r[1];(u.from.toLowerCase().includes(e)||i.getTo(u).toLowerCase().includes(e))&&(t[a]=c,n[c]=a,a+=1)}}catch(d){s.e(d)}finally{s.f()}i.context.searchRealToVisual=n,i.context.searchVisualToReal=t,i.setState({search:t,searchText:e})}else i.context.searchRealToVisual=null,i.context.searchVisualToReal=null,i.setState({search:null,searchText:""})},i.getTo=function(e){var t=i.context.lines[e.index];return void 0===t?e.to:t},i.rowRenderer=function(e){var t=e.key,n=e.index,o=(e.isScrolling,e.isVisible),s=e.style;i.state.search&&(n=i.state.search[n]);var l=i.props.lines[n],r=i.context.lines[n];return void 0===r&&(r=l.to),o&&(i.context.lastRendered=n),a.a.createElement("div",{key:t,style:s},a.a.createElement(b,{from:l.from,to:r,index:n}))},i.state={search:null,searchText:""},i}return Object(c.a)(n,[{key:"render",value:function(){var e=this;this.context.onSearch=this.onSearch;var t=this.state.search?Object.keys(this.state.search).length:this.props.lines.length;return a.a.createElement("div",{style:{paddingLeft:10,paddingTop:60,paddingBottom:10,height:"100%",flexGrow:1}},a.a.createElement(w.a,null,(function(n){var i=n.height,o=n.width;return a.a.createElement(x.a,{key:e.state.searchText,width:o,height:i,rowCount:t,rowHeight:80,rowRenderer:e.rowRenderer,ref:function(t){t&&(e.context.list=t)},style:{paddingBottom:10}})})))}}]),n}(a.a.Component);E.contextType=f;var y=n(231),T=n(106),C=n(232),j=n(195),S=n(233),O=n(117),L=n.n(O),R=n(114),_=n.n(R),V=n(115),I=n.n(V),P=n(116),J=n.n(P),F=n(113),U=n.n(F),A=n(112),B=n.n(A),M=n(120),N=n.n(M),H=n(119),G=n.n(H),D=n(230),W=n(234),K=n(110),z=n.n(K),$=n(238),q=n(242),Q=n(236),X=n(237),Y=n(235),Z=n(118),ee=n.n(Z),te=n(240),ne=n(5),ie=n(186),ae=Object(ne.a)({colorPrimary:{backgroundColor:"darkblue"},barColorPrimary:{backgroundColor:"lightblue"}})(D.a),oe=Object(ne.a)({inputRoot:{color:"black",backgroundColor:"white",width:200,padding:0,margin:0}})(te.a),se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).getAt=function(e){return i.context.searchVisualToReal&&(e=i.context.searchVisualToReal[e]),i.props.lines[e]},i.getTo=function(e){var t=i.context.lines[e.index];return void 0===t?e.to:t},i.isMissing=function(e){return!!i.isVisible(e)&&!i.getTo(e)},i.isVisible=function(e){return!i.context.searchRealToVisual||e.index in i.context.searchRealToVisual},i.trackProgress=function(){if(i.props.lines&&i.context.lines){var e,t=0,n=Object(l.a)(i.props.lines);try{for(n.s();!(e=n.n()).done;){var a=e.value;i.isMissing(a)||(t+=1)}}catch(o){n.e(o)}finally{n.f()}i.setState({full:t})}setTimeout(i.trackProgress,500)},i.getFocused=function(){return i.context.searchRealToVisual?i.context.searchRealToVisual[i.context.focused]||-1:i.context.focused||-1},i.focusLine=function(e){e.index in i.context.focus&&i.context.focus[e.index]&&i.context.focus[e.index]()},i.findNext=function(e){var t=i.getFocused();t<0&&(t=0);var n=t,a=i.props.lines.length;i.context.searchRealToVisual&&(a=Object.keys(i.context.searchRealToVisual).length);for(var o=function(){n=(n+1)%a;var o=i.getAt(n);if(e(o)||n===t)return n>=a-1&&(n=a-2),n<0&&(n=-1),i.context.list.scrollToRow(n+1),setTimeout((function(){i.focusLine(o)}),100),"break"};;){if("break"===o())break}},i.findPrev=function(e){var t=i.getFocused(),n=i.props.lines.length;i.context.searchRealToVisual&&(n=Object.keys(i.context.searchRealToVisual).length),t<0&&(t=n-1);for(var a=t,o=function(){(a=(a-1)%n)<0&&(a=n-1);var o=i.getAt(a);if(e(o)||a===t)return a<=0&&(a=1),i.context.list.scrollToRow(a-1),setTimeout((function(){i.focusLine(o)}),100),"break"};;){if("break"===o())break}},i.onNextClicked=function(){i.findNext(i.isVisible)},i.onPreviousClicked=function(){i.findPrev(i.isVisible)},i.onNextMissingClicked=function(){i.findNext(i.isMissing)},i.onPreviousMissingClicked=function(){i.findPrev(i.isMissing)},i.genFile=function(){var e,t="".concat(i.props.comments,"\r\n"),n=Object(l.a)(i.props.lines);try{for(n.s();!(e=n.n()).done;){var a=e.value;t+="".concat(a.from,"\r\n").concat(i.getTo(a)||"","\r\n")}}catch(o){n.e(o)}finally{n.f()}i.download(t)},i.download=function(e){var t=document.createElement("a"),n=new Blob([e],{type:"text/plain;charset=".concat(i.props.encoding)});t.href=URL.createObjectURL(n),t.download="ags.trs",document.body.appendChild(t),t.click()},i.upload=function(){i.props.upload()},i.onSearch=function(e){i.setState({searchValue:e}),setTimeout((function(){if(i.state.searchValue===e){var t=i.context.lastRendered;if(i.context.onSearch(e),t){var n=i.findVisibleVisualIndex(t);if(0!==n&&!n)return;i.context.list.scrollToRow(n+1)}}}),200)},i.onHelpClicked=function(){i.setState({showHelp:!0})},i.onJumpToLineClicked=function(){i.setState({showJumpToLine:!0})},i.findVisibleVisualIndex=function(e){if(!i.context.searchVisualToReal)return e;for(;!(e in i.context.searchRealToVisual)&&e>=0;)e-=1;return i.context.searchRealToVisual[e]},i.onJumpToLine=function(){var e=parseInt(i.state.jumpLine);e>=i.props.lines.length?(e=i.props.lines.length-1,i.setState({jumpLine:e})):e<1&&(e=1,i.setState({jumpLine:e}));var t=i.props.lines[e],n=i.findVisibleVisualIndex(e);(0===n||n)&&(i.context.list.scrollToRow(n+1),setTimeout((function(){i.focusLine(t)}),100))},i.encodings=i.parseEncodings(),i.state={searchValue:"",showHelp:!1,showJumpToLine:!1,jumpLine:1},i}return Object(c.a)(n,[{key:"parseEncodings",value:function(){var e,t=[],n=Object(l.a)(ie);try{for(n.s();!(e=n.n()).done;){var i,a=e.value,o=Object(l.a)(a.encodings);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.push(s.name)}}catch(r){o.e(r)}finally{o.f()}}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"componentDidMount",value:function(){setTimeout(this.trackProgress,500)}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(y.a,{position:"fixed"},a.a.createElement(C.a,null,a.a.createElement(j.a,{variant:"h6",style:{paddingRight:50}},"AGS TRS Editor"),a.a.createElement(S.a,{title:"Load","aria-label":"load"},a.a.createElement(T.a,{edge:"start",color:"inherit",onClick:this.upload},a.a.createElement(B.a,null))),this.props.lines&&a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,{title:"Save","aria-label":"save"},a.a.createElement(T.a,{edge:"start",color:"inherit",onClick:this.genFile,style:{marginRight:50}},a.a.createElement(U.a,null))),a.a.createElement(S.a,{title:"Previous missing line","aria-label":"previous missing line"},a.a.createElement(T.a,{edge:"start",color:"inherit",onClick:this.onPreviousMissingClicked},a.a.createElement(_.a,null))),a.a.createElement(S.a,{title:"Previous line (SHIFT + TAB)","aria-label":"previous line"},a.a.createElement(T.a,{edge:"start",color:"inherit",onClick:this.onPreviousClicked},a.a.createElement(I.a,null))),a.a.createElement(S.a,{title:"Next line (TAB)","aria-label":"next line"},a.a.createElement(T.a,{edge:"start",color:"inherit",onClick:this.onNextClicked},a.a.createElement(J.a,null))),a.a.createElement(S.a,{title:"Next missing line","aria-label":"next missing line"},a.a.createElement(T.a,{edge:"start",color:"inherit",onClick:this.onNextMissingClicked},a.a.createElement(L.a,null))),a.a.createElement(S.a,{title:"Jump to line","aria-label":"jump to line"},a.a.createElement(T.a,{edge:"start",color:"inherit",style:{marginLeft:40},onClick:this.onJumpToLineClicked},a.a.createElement(ee.a,null)))),this.props.loading&&a.a.createElement(W.a,null),a.a.createElement("div",{style:{flexGrow:1}}),a.a.createElement(oe,{id:"encoding-select",options:this.encodings,value:this.props.encoding,onChange:this.props.onEncodingChanged,getOptionLabel:function(e){return e},style:{width:300},renderInput:function(e){return a.a.createElement(m.a,Object.assign({},e,{variant:"outlined",size:"small"}))}}),this.props.lines&&a.a.createElement(z.a,{value:this.state.searchValue,style:{paddingLeft:20},onChange:this.onSearch,onCancelSearch:function(){return e.onSearch("")}}),a.a.createElement(S.a,{title:"Help","aria-label":"help"},a.a.createElement(T.a,{color:"inherit",target:"_blank",onClick:this.onHelpClicked},a.a.createElement(G.a,null))),a.a.createElement(S.a,{title:"Source Code","aria-label":"source code"},a.a.createElement(T.a,{color:"inherit",target:"_blank",href:"https://github.com/tzachshabtay/ags-trs-editor/"},a.a.createElement(N.a,null)))),this.renderProgress()),this.renderHelpDialog(),this.renderJumpToLineDialog())}},{key:"renderProgress",value:function(){if(!this.props.lines)return null;var e=this.state&&this.state.full||0,t=Math.round(e/this.props.lines.length*100),n="".concat(e,"/").concat(this.props.lines.length," Completed (").concat(t,"%)");return a.a.createElement(S.a,{title:n,"aria-label":"progress"},a.a.createElement(ae,{variant:"determinate",value:t}))}},{key:"renderHelpDialog",value:function(){var e=this;return a.a.createElement(q.a,{open:this.state.showHelp,onClose:function(){return e.setState({showHelp:!1})},"aria-labelledby":"help-dialog-title","aria-describedby":"help-dialog-description"},a.a.createElement(Y.a,{id:"help-dialog-title"},"AGS TRS Editor- Help"),a.a.createElement(Q.a,{dividers:!0,id:"help-dialog-description"},a.a.createElement(j.a,{gutterBottom:!0},"AGS TRS Editor helps edit trs file for translating AGS (Adventure Game Studio) games. Click the load button to load a trs file, make your edits and then click the save button to download it."),a.a.createElement(j.a,null,"- If you don't want to translate a line, just leave the following line blank."),a.a.createElement(j.a,null,"- Special characters such as [ and %%s symbolize things within the game, so should be left in an appropriate place in the message.")))}},{key:"renderJumpToLineDialog",value:function(){var e=this;return a.a.createElement(q.a,{open:this.state.showJumpToLine,onClose:function(){return e.setState({showJumpToLine:!1})},"aria-labelledby":"jump-dialog-title","aria-describedby":"jump-dialog-description"},a.a.createElement(Y.a,{id:"jump-dialog-title"},"Jump To Line"),a.a.createElement(Q.a,{dividers:!0,id:"jump-dialog-description"},a.a.createElement(j.a,{gutterBottom:!0},"Select line number to jump:"),a.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"lineNumber",label:"Line Number",type:"number",InputLabelProps:{shrink:!0},inputProps:{min:"1",step:"1"},value:this.state.jumpLine,onChange:function(t){return e.setState({jumpLine:t.target.value})},fullWidth:!0})),a.a.createElement(X.a,null,a.a.createElement($.a,{onClick:function(){return e.setState({showJumpToLine:!1})},color:"primary"},"Close"),a.a.createElement($.a,{onClick:this.onJumpToLine,color:"primary"},"Jump")))}}]),n}(a.a.Component);se.contextType=f;var le=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement(f.Provider,{value:{focus:{}}},a.a.createElement(re,null))}}]),n}(a.a.Component),re=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).onEncodingChanged=function(e,t){t&&i.setState({encoding:t},(function(){return i.parseFile(i.state.file)}))},i.startUpload=function(){i.setState({loading:!0},i.upload)},i.upload=function(){var e=document.createElement("input");e.type="file",e.style.display="none",e.onchange=function(t){var n=t.target.files[0];e.func(n),document.body.removeChild(e)},e.func=i.parseFile,document.body.appendChild(e),e.click()},i.parseFile=function(e){if(e){i.setState({file:e});var t=new FileReader;t.onload=function(e){var n=e.target.result;t.func(n)},t.func=i.onUploaded,t.readAsText(e,i.state.encoding)}},i.onUploaded=function(e){var t,n=e.replace(/\r/g,"").split("\n"),a=[],o=null,s=null,r="",c=0,u=Object(l.a)(n);try{for(u.s();!(t=u.n()).done;){var d=t.value;d.startsWith("//")?r=r?"".concat(r,"\r\n").concat(d):d:null===o?o=d:null===s?s=d:(a.push({from:o,to:s,index:c}),c+=1,o=d,s=null)}}catch(h){u.e(h)}finally{u.f()}o&&(a.push({from:o,to:s,index:c}),c+=1),i.context.lines=new Array(a.length),i.setState({lines:a,comments:r},(function(){i.context.list&&setTimeout((function(){i.context.list.forceUpdateGrid(),i.context.list.forceUpdate(),i.context.list.scrollToRow(0)}),500)}))},i.state={encoding:"UTF-8"},i}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"App",style:{height:"100%"}},a.a.createElement(se,{lines:this.state&&this.state.lines,comments:this.state&&this.state.comments,upload:this.startUpload,loading:this.state&&this.state.loading,encoding:this.state&&this.state.encoding,onEncodingChanged:this.onEncodingChanged}),this.state&&this.state.lines&&a.a.createElement(E,{lines:this.state.lines,comments:this.state.comments}),(!this.state||!this.state.lines)&&a.a.createElement(j.a,{style:{paddingTop:100,paddingLeft:50}},"Please load a TRS file."))}}]),n}(a.a.Component);re.contextType=f;var ce=le;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[134,1,2]]]);
//# sourceMappingURL=main.f102fca3.chunk.js.map